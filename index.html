<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏</title>
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ü–∏–∏">
    <meta name="theme-color" content="#3498db">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÖ</text></svg>">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÖ</text></svg>">
    
    <!-- CSS Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body>
<div class="header">
    <div class="container">
        <div class="header-content flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold">
                    <i class="fas fa-calculator mr-2"></i> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏
                </h1>
                <p class="mt-1 opacity-90">
                    –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ü–∏–∏
                </p>
            </div>
            <div class="logo">
                <div class="text-xl font-bold">–ü–†–û–ì–†–ï–°–°</div>
                <div class="text-sm opacity-90">–ê–∫—Ü–∏–æ–Ω–µ—Ä–Ω–æ–µ –û–±—â–µ—Å—Ç–≤–æ</div>
            </div>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="container mt-4">
        <div class="card">
            <!-- –û—Å—Ç–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
            <div class="card-header">
                <h2 class="text-xl font-bold">–†–∞—Å—á–µ—Ç —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏</h2>
            </div>
            <div class="card-body">
                <!-- Data loading status -->
                <div id="dataStatus" class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-center">
                        <div class="loading-spinner"></div>
                        <p class="text-blue-700">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö...</p>
                    </div>
                </div>

                <!-- Offline status indicator -->
                <div id="offlineStatus" class="mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg hidden">
                    <div class="flex items-center">
                        <i class="fas fa-wifi-slash text-yellow-600 mr-2"></i>
                        <p class="text-yellow-700">–†–∞–±–æ—Ç–∞–µ–º –≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º —Ä–µ–∂–∏–º–µ. –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –∫—ç—à–∞.</p>
                    </div>
                </div>

                <!-- Product search with notification area -->
                <div class="mb-4 flex flex-col md:flex-row md:items-start gap-4">
                    <div class="flex-grow">
                        <label for="productSearch" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-search mr-2 text-blue-500"></i> –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞
                        </label>
                        <div class="relative">
                            <input
                               type="text"
                               id="productSearch"
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞..."
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                               aria-label="–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –∫–æ–¥—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é"
                               disabled
                            >
                            <div id="searchResults" class="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto hidden" role="listbox">
                                <!-- Search results will appear here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Standard notification container (now placed next to search) -->
                    <div id="standardNotificationContainer" class="md:mt-8 w-full md:w-64"></div>
                </div>

                <!-- Product info -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="productCode" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-barcode mr-2 text-blue-500"></i> –ö–æ–¥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏
                        </label>
                        <input
                           type="text"
                           id="productCode"
                           readonly
                           class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed"
                           aria-readonly="true"
                        >
                    </div>

                    <div>
                        <label for="productName" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-tag mr-2 text-blue-500"></i> –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
                        </label>
                        <input
                           type="text"
                           id="productName"
                           readonly
                           class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed"
                           aria-readonly="true"
                        >
                    </div>

                    <div>
                        <label for="shelfLife" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-calendar-day mr-2 text-blue-500"></i> –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ (–¥–Ω–µ–π)
                        </label>
                        <div class="relative">
                            <input
                               type="text"
                               id="shelfLife"
                               readonly
                               class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed pr-12"
                               aria-readonly="true"
                            >
                            <span class="absolute right-3 top-3 text-gray-500">–¥–Ω–µ–π</span>
                        </div>
                    </div>

                    <div>
                        <label for="quantityPerPack" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-boxes mr-2 text-blue-500"></i> –®—Ç—É–∫ –≤ —É–ø–∞–∫–æ–≤–∫–µ
                        </label>
                        <input
                           type="number"
                           id="quantityPerPack"
                           min="1"
                           readonly
                           class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed"
                           aria-readonly="true"
                        >
                    </div>

                    <div>
                        <label for="groupBarcode" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-qrcode mr-2 text-blue-500"></i> –®—Ç—Ä–∏—Ö–∫–æ–¥ —É–ø–∞–∫–æ–≤–∫–∏
                        </label>
                        <input
                           type="text"
                           id="groupBarcode"
                           readonly
                           class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed"
                           aria-readonly="true"
                        >
                    </div>

                    <div>
                        <label for="manufacturerBarcode" class="block text-gray-700 font-medium mb-2">
                            <i class="fas fa-industry mr-2 text-blue-500"></i> –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
                        </label>
                        <input
                           type="text"
                           id="manufacturerBarcode"
                           readonly
                           class="w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-lg cursor-not-allowed"
                           aria-readonly="true"
                        >
                    </div>
                </div>

                <!-- Production date -->
                <div class="mb-4">
                    <label for="productionDate" class="block text-gray-700 font-medium mb-2">
                        <i class="fas fa-calendar-alt mr-2 text-blue-500"></i> –î–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
                    </label>
                    <input
                       type="date"
                       id="productionDate"
                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                       aria-label="–£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞"
                    >
                </div>

                <!-- Calculate button -->
                <button
                   onclick="calculateExpiry()"
                   class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300 shadow-md"
                   aria-label="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏"
                   id="calculateButton"
                   disabled
                >
                    <i class="fas fa-calculator mr-2"></i> –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏
                </button>

                <!-- Result -->
                <div id="result" class="mt-4 p-5 bg-blue-50 border border-blue-200 rounded-lg hidden fade-in" aria-live="polite">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-lg mr-4">
                            <i class="fas fa-calendar-check text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="text-gray-700">
                                –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏:
                            </p>
                            <p class="text-xl font-bold text-blue-800" id="expiryDate"></p>
                        </div>
                    </div>
                </div>

                <!-- Last update info -->
                <div id="lastUpdateInfo" class="mt-4 text-xs text-gray-500 text-center hidden">
                    –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã: <span id="lastUpdateTime"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div class="footer">
    <div class="container">
        <div class="flex flex-col items-center">
            <p class="mb-2">
                ¬© 2025 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏ | –í–µ—Ä—Å–∏—è 2.5 PWA 
                <i class="fas fa-heart text-red-500 mx-1"></i> 
                <i class="fas fa-code-branch text-blue-500 mx-1"></i> 
                (made in Quality service)
            </p>
            <div class="flex items-center space-x-4 text-sm text-gray-300">
                <a href="mailto:asvidovich@progressfood.com" 
                   class="hover:text-white transition-colors flex items-center"
                   aria-label="–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å">
                    <i class="fas fa-envelope mr-1"></i>
                    –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                </a>
                <span class="text-gray-500">|</span>
                <button onclick="forceRefreshData()" 
                        class="hover:text-white transition-colors flex items-center refresh-footer-btn"
                        id="refreshFooterButton"
                        aria-label="–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ">
                    <i class="fas fa-sync-alt mr-1"></i>
                    –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                </button>
            </div>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
